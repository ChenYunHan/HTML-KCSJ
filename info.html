<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style_info.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="./js/jquery-3.3.1.js"></script>
    <script src="./js/jquerysession.js"></script>
    <script>
        if ($.session.get("name") == null) {
            window.location.href = "./login.html?error=1";
        }
    </script>

</head>

<body>
    <div class="container-fluid">
        <div id="d1" class="center-vertical">
            <div class="f1 " style="width: 100%">
                <a href="mine.html">
                    <div class="left-arrow"></div>
                </a>个人资料
            </div>
        </div>
        <div id="d2" class="ii">
            <img src="./img/u24.png" alt="头像" class="center-block" style="width:70px">
            <img id="img1" src="./img/u66.png" alt="框">
            <img id="img2" src="./img/u26.png" alt="相机上传">
        </div>
        <div class="row ii1">
        </div>
        <div class=" row ii">
            <ul class="list-unstyled">
                <li>
                    <a href="#5">
                        <div class=" col-xs-12 i4_1 " style="border-bottom: 0.3px solid rgba(0, 0, 0, 0.253);">
                            <div class="col-xs-3">
                                <p>姓名</p>
                            </div>
                            <div class="col-xs-8 sp1">
                                <span id="name1">某某</span>
                            </div>
                            <div class="right-arrow"></div>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="#6">
                        <div class=" col-xs-12 i4_1 ">
                            <div class="col-xs-3">
                                <p>手机</p>
                            </div>
                            <div id="tel1" class="col-xs-8 sp1">
                            </div>
                            <div class="right-arrow"></div>
                        </div>
                    </a>
                </li>
            </ul>
        </div>
        <div id="dd1" class="alert alert-danger center-block" style="width: 80%;display: none">电话号码格式有误！</div>
    </div>

    <script src="./js/bootstrap.min.js"></script>
    <script>
        var name = $.session.get("name")
        $('#tel1').html('<span id="tel">' + name + '</span>');
        $("#name1").click(function () {
            var sp1 = $(this);
            var txt = sp1.text();
            var input = $("<input type='text' value='" + txt + "'>");
            sp1.html(input);
            input.click(function () {
                return false;
            })
            input.trigger("focus");
            input.blur(function () {
                var newTxt = $(this).val();
                sp1.html(newTxt);
            })
        })
        $("#tel").click(function () {
            var sp1 = $(this);
            var txt = sp1.text();
            var input = $("<input type='text' value='" + txt + "'>");
            sp1.html(input);
            input.click(function () {
                return false;
            })
            input.trigger("focus");
            input.blur(function () {
                var newTxt = $(this).val();
                var reg = /^1(3|4|5|7|8)\d{9}$/;
                if (!reg.test(newTxt)) {
                    $("#dd1").fadeIn();
                    input.css("background-color", "rgb(243,221,221)");
                    window.onbeforeunload = function () {
                        return "你确定要离开吗";
                    }
                } else {
                    boolean1 = true;
                    sp1.html(newTxt);
                    $.session.set("name", newTxt);
                    window.onbeforeunload = function () {}
                }
            })
            input.focus(function () {
                input.css("background-color", "white");
                $("#dd1").fadeOut();
            })
        })
    </script>
</body>

</html>